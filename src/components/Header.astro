---
import BannerTop from "./BannerTop.astro";
import { Image } from "astro:assets";
import logo from "../img/logo.png";
import {
  SignedIn,
  SignedOut,
  UserButton,
  SignInButton,
} from "@clerk/astro/components";
---

<script
  src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"
  defer></script>

<header
  x-data="{ open: false }"
  class="sticky top-0 z-50 w-full bg-black text-white shadow"
>
  <BannerTop />

  <!-- ===================== -->
  <!-- NIVEL 1: LOGO + AUTH -->
  <!-- ===================== -->
  <div class="border-b border-neutral-700">
    <div
      class="relative h-[64px] max-w-screen-xl mx-auto px-4 lg:px-6 flex items-center"
    >
      <!-- Logo centrado -->
      <div class="absolute inset-0 flex items-center justify-center">
        <a href="/" aria-label="Black Smoke">
          <Image
            src={logo}
            alt="Black Smoke Logo"
            class="h-[32px] w-auto object-contain"
          />
        </a>
      </div>

      <!-- Mobile: hamburguesa -->
      <button
        class="lg:hidden z-10"
        @click="open = !open"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path
            x-show="!open"
            fill-rule="evenodd"
            d="M3 5h14v2H3V5zm0 4h14v2H3V9zm0 4h14v2H3v-2z"></path>
          <path
            x-show="open"
            fill-rule="evenodd"
            d="M4.293 4.293 10 8.586l5.707-4.293 1.414 1.414L11.414 10l5.707 5.707-1.414 1.414L10 11.414l-5.707 5.707-1.414-1.414L8.586 10 2.879 4.293z"
          ></path>
        </svg>
      </button>

      <!-- Auth derecha -->
      <div class="ml-auto z-10">
        <SignedOut>
          <SignInButton mode="modal">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-user"
              ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
                d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path><path
                d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path></svg
            >
          </SignInButton>
        </SignedOut>
        <SignedIn>
          <UserButton />
        </SignedIn>
      </div>
    </div>
  </div>

  <!-- ===================== -->
  <!-- NIVEL 2: NAV -->
  <!-- ===================== -->

  <!-- Desktop -->
  <nav
    class="hidden lg:flex max-w-screen-xl mx-auto px-4 lg:px-6 h-[56px] items-center justify-center gap-2"
  >
    <a class="nav-link" href="/#nosotros">Nosotros</a>
    <a class="nav-link" href="/#music">Música</a>
    <a class="nav-link" href="/#shows">Shows</a>
    <a class="nav-link" href="/apoyos">Tu Apoyo</a>
    <a class="nav-link" href="/smokers">BS Family</a>
    <a class="nav-link" href="/#news">Noticias</a>
    <a class="nav-link" href="/#gallery">Fotos</a>
    <a class="nav-link" href="/#contacto">Contacto</a>
    <a
      class="nav-link bg-white text-black"
      href="https://blacksmokeuy.myshopify.com/"
      target="_blank"
    >
      Tienda
    </a>
  </nav>

  <!-- Mobile drawer -->
  <div
    x-show="open"
    x-transition
    @click.outside="open = false"
    class="lg:hidden bg-black border-t border-neutral-700"
  >
    <nav class="flex flex-col px-4 py-4 gap-2">
      <a class="nav-link" href="/#nosotros" @click="open = false">Nosotros</a>
      <a class="nav-link" href="/#music" @click="open = false">Música</a>
      <a class="nav-link" href="/#shows" @click="open = false">Shows</a>
      <a class="nav-link" href="/apoyos" @click="open = false">Tu Apoyo</a>
      <a class="nav-link" href="/smokers" @click="open = false">BS Family</a>
      <a class="nav-link" href="/#news" @click="open = false">Noticias</a>
      <a class="nav-link" href="/#gallery" @click="open = false">Fotos</a>
      <a class="nav-link" href="/#contacto" @click="open = false">Contacto</a>
      <a
        class="nav-link bg-white text-black"
        href="https://blacksmokeuy.myshopify.com/"
        target="_blank"
      >
        Tienda
      </a>
    </nav>
  </div>
</header>

<style>
  .nav-link {
    @apply uppercase px-4 py-2 text-sm font-semibold rounded-lg
           hover:bg-gray-200 hover:text-gray-900 transition;
  }
</style>
